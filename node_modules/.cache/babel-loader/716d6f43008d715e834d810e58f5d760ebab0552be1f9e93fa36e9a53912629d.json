{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { LanguagesEnum } from \"../types/main-page\";\nimport { sensitiveWords } from \"../data/sensitive-words\";\nimport useLanguage from \"./useLanguage\";\nconst useAnswerIsHidden = lang => {\n  _s();\n  const {\n    mainLang\n  } = useLanguage(lang);\n  const defaultText = localStorage.length > 0 && localStorage.getItem(lang === LanguagesEnum.Thai ? \"text-hidden-th\" : lang === LanguagesEnum.Chinese ? \"text-hidden-zh\" : lang === LanguagesEnum.German ? \"text-hidden-de\" : \"text-hidden\") || \"\";\n  const [text, setText] = useState(defaultText);\n  const [warningText, setWarningText] = useState(\"\");\n  const [hasSensitiveWords, setHasSensitiveWords] = useState(false);\n  const handleMessage = message => {\n    lang === LanguagesEnum.Thai ? localStorage.setItem(\"text-hidden-th\", message) : lang === LanguagesEnum.Chinese ? localStorage.setItem(\"text-hidden-zh\", message) : lang === LanguagesEnum.German ? localStorage.setItem(\"text-hidden-de\", message) : localStorage.setItem(\"text-hidden\", message);\n  };\n  useEffect(() => {\n    if (sensitiveWords.some(word => text.toUpperCase().includes(word.toUpperCase()))) {\n      setHasSensitiveWords(true);\n      setWarningText(mainLang.language.warning_text);\n      handleMessage(\"\");\n    } else if (text.includes(\"@\")) {\n      setHasSensitiveWords(true);\n      setWarningText(mainLang.language.atsign_not_allowed);\n      handleMessage(\"\");\n    } else {\n      setHasSensitiveWords(false);\n      handleMessage(text);\n    }\n  }, [hasSensitiveWords, text]);\n  return {\n    hasSensitiveWords,\n    text,\n    warningText,\n    setText,\n    defaultText\n  };\n};\n_s(useAnswerIsHidden, \"MyvWeQKsEsbsdx1RL8eR+vqXYIY=\", false, function () {\n  return [useLanguage];\n});\nexport default useAnswerIsHidden;","map":{"version":3,"names":["useEffect","useState","LanguagesEnum","sensitiveWords","useLanguage","useAnswerIsHidden","lang","_s","mainLang","defaultText","localStorage","length","getItem","Thai","Chinese","German","text","setText","warningText","setWarningText","hasSensitiveWords","setHasSensitiveWords","handleMessage","message","setItem","some","word","toUpperCase","includes","language","warning_text","atsign_not_allowed"],"sources":["/Users/mark/Documents/GitHub/lets-guess/src/hooks/useAnswerIsHidden.ts"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport { LangType, LanguagesEnum } from \"../types/main-page\"\nimport { sensitiveWords } from \"../data/sensitive-words\"\nimport useLanguage from \"./useLanguage\"\n\nconst useAnswerIsHidden = (lang: LangType) => {\n\n  const { mainLang } = useLanguage(lang)\n\n  const defaultText: string = \n    localStorage.length > 0 && localStorage.getItem(\n      lang === LanguagesEnum.Thai ? \"text-hidden-th\" : \n      lang === LanguagesEnum.Chinese ? \"text-hidden-zh\" :\n      lang === LanguagesEnum.German ? \"text-hidden-de\" :\n      \"text-hidden\"\n    ) || \"\"\n\n  const [text, setText] = useState<string>(defaultText)\n  const [warningText, setWarningText] = useState<string>(\"\")\n  const [hasSensitiveWords, setHasSensitiveWords] = useState(false)\n\n  const handleMessage = (message: string) => {\n    lang === LanguagesEnum.Thai ?\n      localStorage.setItem(\"text-hidden-th\", message) :\n    lang === LanguagesEnum.Chinese ?\n      localStorage.setItem(\"text-hidden-zh\", message) :\n    lang === LanguagesEnum.German ?\n      localStorage.setItem(\"text-hidden-de\", message) :\n      localStorage.setItem(\"text-hidden\", message)\n  }\n\n  useEffect(() => {\n    if (sensitiveWords.some(word => text.toUpperCase().includes(word.toUpperCase()))){\n      setHasSensitiveWords(true)\n      setWarningText(mainLang.language.warning_text)\n      handleMessage(\"\")\n    } else if (text.includes(\"@\")){\n      setHasSensitiveWords(true)\n      setWarningText(mainLang.language.atsign_not_allowed)\n      handleMessage(\"\")\n    } else {\n      setHasSensitiveWords(false)\n      handleMessage(text)\n    }\n  }, [hasSensitiveWords, text])\n\n  return { hasSensitiveWords, text, warningText, setText, defaultText }\n}\n\nexport default useAnswerIsHidden"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAAmBC,aAAa,QAAQ,oBAAoB;AAC5D,SAASC,cAAc,QAAQ,yBAAyB;AACxD,OAAOC,WAAW,MAAM,eAAe;AAEvC,MAAMC,iBAAiB,GAAIC,IAAc,IAAK;EAAAC,EAAA;EAE5C,MAAM;IAAEC;EAAS,CAAC,GAAGJ,WAAW,CAACE,IAAI,CAAC;EAEtC,MAAMG,WAAmB,GACvBC,YAAY,CAACC,MAAM,GAAG,CAAC,IAAID,YAAY,CAACE,OAAO,CAC7CN,IAAI,KAAKJ,aAAa,CAACW,IAAI,GAAG,gBAAgB,GAC9CP,IAAI,KAAKJ,aAAa,CAACY,OAAO,GAAG,gBAAgB,GACjDR,IAAI,KAAKJ,aAAa,CAACa,MAAM,GAAG,gBAAgB,GAChD,aACF,CAAC,IAAI,EAAE;EAET,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGhB,QAAQ,CAASQ,WAAW,CAAC;EACrD,MAAM,CAACS,WAAW,EAAEC,cAAc,CAAC,GAAGlB,QAAQ,CAAS,EAAE,CAAC;EAC1D,MAAM,CAACmB,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGpB,QAAQ,CAAC,KAAK,CAAC;EAEjE,MAAMqB,aAAa,GAAIC,OAAe,IAAK;IACzCjB,IAAI,KAAKJ,aAAa,CAACW,IAAI,GACzBH,YAAY,CAACc,OAAO,CAAC,gBAAgB,EAAED,OAAO,CAAC,GACjDjB,IAAI,KAAKJ,aAAa,CAACY,OAAO,GAC5BJ,YAAY,CAACc,OAAO,CAAC,gBAAgB,EAAED,OAAO,CAAC,GACjDjB,IAAI,KAAKJ,aAAa,CAACa,MAAM,GAC3BL,YAAY,CAACc,OAAO,CAAC,gBAAgB,EAAED,OAAO,CAAC,GAC/Cb,YAAY,CAACc,OAAO,CAAC,aAAa,EAAED,OAAO,CAAC;EAChD,CAAC;EAEDvB,SAAS,CAAC,MAAM;IACd,IAAIG,cAAc,CAACsB,IAAI,CAACC,IAAI,IAAIV,IAAI,CAACW,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACF,IAAI,CAACC,WAAW,CAAC,CAAC,CAAC,CAAC,EAAC;MAC/EN,oBAAoB,CAAC,IAAI,CAAC;MAC1BF,cAAc,CAACX,QAAQ,CAACqB,QAAQ,CAACC,YAAY,CAAC;MAC9CR,aAAa,CAAC,EAAE,CAAC;IACnB,CAAC,MAAM,IAAIN,IAAI,CAACY,QAAQ,CAAC,GAAG,CAAC,EAAC;MAC5BP,oBAAoB,CAAC,IAAI,CAAC;MAC1BF,cAAc,CAACX,QAAQ,CAACqB,QAAQ,CAACE,kBAAkB,CAAC;MACpDT,aAAa,CAAC,EAAE,CAAC;IACnB,CAAC,MAAM;MACLD,oBAAoB,CAAC,KAAK,CAAC;MAC3BC,aAAa,CAACN,IAAI,CAAC;IACrB;EACF,CAAC,EAAE,CAACI,iBAAiB,EAAEJ,IAAI,CAAC,CAAC;EAE7B,OAAO;IAAEI,iBAAiB;IAAEJ,IAAI;IAAEE,WAAW;IAAED,OAAO;IAAER;EAAY,CAAC;AACvE,CAAC;AAAAF,EAAA,CA1CKF,iBAAiB;EAAA,QAEAD,WAAW;AAAA;AA0ClC,eAAeC,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}